# Base model from the user's specification.
FROM dengcao/Qwen3-Reranker-4B:Q4_K_M

# Simplified template for ultra-fast reranking
TEMPLATE """Query: {{ .Prompt }}
Document: {{ .Context }}
Score: {{ .Response }}"""

# Minimal system prompt for speed
SYSTEM """Score relevance 0-1."""

# Parameters optimized for 4B reranker model
PARAMETER temperature 0.0
PARAMETER top_p 1.0
PARAMETER top_k 1
PARAMETER repeat_penalty 1.0
PARAMETER num_predict 5
PARAMETER num_ctx 8192

PARAMETER stop "<|im_start|>"
PARAMETER stop "<|im_end|>"
PARAMETER stop "<|endoftext|>"
PARAMETER stop "\n"
PARAMETER seed 42
