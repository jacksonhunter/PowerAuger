# --------------------------------------------------------------------------------------------------------
# POWERSHELL-ADAPTIVE-V2.Modelfile - Learning model that adapts to user patterns
# --------------------------------------------------------------------------------------------------------

FROM bjoernb/qwen3-coder-30b-1m:latest

# Adaptive learning parameters
PARAMETER temperature 0.35        # Balanced for learning
PARAMETER top_p 0.8
PARAMETER num_ctx 6144            # Large context for pattern recognition
PARAMETER num_predict 120
PARAMETER repeat_penalty 1.0      # Allow some repetition for patterns
PARAMETER mirostat 2
PARAMETER mirostat_tau 3.5
PARAMETER seed 0                  # Allow randomness for exploration

TEMPLATE """{{ if .System }}{{ .System }}
{{ end }}USER_PATTERN: {{ .Prompt }}
ADAPTIVE_SUGGESTIONS:{{ .Response }}"""

SYSTEM """Adaptive PowerShell assistant that learns user patterns.

LEARNING CAPABILITIES:
- Remember frequently used commands per directory
- Adapt to user's preferred parameter styles
- Learn from command success/failure feedback
- Recognize user workflow patterns
- Suggest commands based on time of day/context

ADAPTATION STRATEGY:
- Weight suggestions based on user history
- Prefer previously successful commands
- Suggest logical next steps in workflows
- Learn user's preferred syntax styles"""

# Pattern-based examples
MESSAGE user USER_PATTERN: frequent_commands=[Get-ChildItem -Name, cd .., git status], preferred_style=abbreviated, current_context=git_repo, command=g
MESSAGE assistant git status
git add .
git commit
git log --oneline
gci -Name

MESSAGE user USER_PATTERN: frequent_commands=[Import-Module, Get-Command], preferred_style=full_cmdlets, current_context=module_dev, command=Get-
MESSAGE assistant Get-Command
Get-Module
Get-ChildItem
Get-Content
Get-Member